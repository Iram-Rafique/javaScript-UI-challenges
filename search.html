<!-- 


<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <form id="form">
        <label for="search">Seacrh
            <input type="text" id="search">
           
        </label>
        <input type="submit">

    </form>
    <div id="result"></div>


    <script>
        const form = document.getElementById("form")
        let items = ["banana", "apple", "mango"]

        form.addEventListener("submit", (event) => {
            event.preventDefault()

            const serach = document.getElementById('search').value.trim().toLocaleLowerCase()
            serach.innerHtml = ""
            console.log(serach)
            const result = document.getElementById("result")
            const matched = items.filter((item) =>
                item.toLocaleLowerCase().includes(serach.toLocaleLowerCase()))
            const element = document.createElement("p")
            element.textContent = matched
            result.appendChild(element)
        })

    </script>
</body>

</html> -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search with Debounce</title>
</head>

<body>
    <form id="form">
        <label for="search">Search
            <input type="text" id="search">
        </label>
       
    </form>

    <div id="result"></div>

    <script>
        const form = document.getElementById("form");
        const searchInput = document.getElementById("search");
        const resultDiv = document.getElementById("result");
        const items = ["banana", "apple", "mango", "orange", "grapes"];

      // debounce function: makes sure a function only runs after a certain amount of time has passed
        // since the last time it was called
        function debounce(func, delay) {
            // timer variable will keep track of the timeout
            let timer;

            // return a new function that will be used instead of calling func directly
//             debounce returns a new function.

// This new function can accept any number of arguments(collected in args).
            return (...args) => {
                // clear any previous timer to reset the wait time
                clearTimeout(timer);

                // set a new timer to call the original function after 'delay' milliseconds
                timer = setTimeout(() => {
                    // call the original function with the arguments that were passed in
                    //func(...args) // which is showResults(currentQuery)

                    func(...args);
                }, delay);
            };
        }

        // Function to display results
        function showResults(query) {
            resultDiv.innerHTML = ""; // Clear previous results
            if (!query) return;

            const matched = items.filter(item =>
                item.toLowerCase().includes(query.toLowerCase())
            );

            if (matched.length === 0) {
                resultDiv.textContent = "No matches found";
                return;
            }

            matched.forEach(item => {
                const p = document.createElement("p");
                p.textContent = item;
                resultDiv.appendChild(p);
            });
        }

        // Debounced version of showResults
        const debouncedSearch = debounce(showResults, 1000);

        // Trigger search on input
        // searchInput.addEventListener("input", (e) => {
        //     debouncedSearch(e.target.value.trim());
        // });
    searchInput.addEventListener("input", (e) => {
        debouncedSearch(e.target.value.trim());
    });

     
    </script>
</body>

</html>
